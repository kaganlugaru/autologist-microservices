# Инструкции для AI-агентов: Autologist Microservices

## Архитектура и компоненты
- Проект состоит из микросервисов для анализа сообщений автосервиса через Telegram и WhatsApp.
- Основные части:
  - **frontend/**: React SPA (порт 3000), Vite, HMR, ESLint. Вход: `frontend/index.html`, конфиг: `frontend/vite.config.js`.
  - **backend/**: Node.js API (порт 3001), логика работы с чатами, интеграция с базой данных. Вход: `backend/server.js`, общие модули: `backend/shared/`.
  - **telegram-parser/**: Python-сервис для сбора и фильтрации сообщений Telegram, поддержка Supabase. Вход: `telegram-parser/get_chats.py`, настройка: `.env`, сессии: `*.session`.
  - **shared/**: Общие JS-модули для backend и других сервисов.
  - **SQL-скрипты**: миграции и проверки структуры БД.

## Важные рабочие процессы
- **Запуск фронтенда**: `cd frontend; npm run dev` (порт 3000)
- **Запуск backend**: `cd backend; node server.js` (порт 3001)
- **Запуск парсера**: `cd telegram-parser; python get_chats.py`
- **Установка зависимостей**:
  - Node.js: `npm install` в нужной директории
  - Python: `pip install -r requirements.txt` в `telegram-parser/`
- **Сессии Telegram**: используйте отдельные session-файлы для локальной и production-среды. Не используйте один файл одновременно локально и на сервере.
- **Настройка переменных окружения**: пример `.env` в `telegram-parser/README.md`.

## Конвенции и паттерны
- **Микросервисная структура**: каждый сервис изолирован, общение через API и БД.
- **База данных**: PostgreSQL, часто через Supabase. Скрипты миграций — в корне и `shared/`.
- **Ключевые файлы**:
  - `backend/shared/database.js` — подключение к БД
  - `telegram-parser/get_chats.py` — основной парсер Telegram
  - `frontend/src/` — React-компоненты
- **Тесты**: Python-тесты — файлы `test_*.py` в корне, запуск через `pytest`.
- **Деплой**: Railway, Render, Vercel — см. соответствующие гайды в корне.

## Примеры типовых задач
- Добавить ключевое слово для фильтрации: обновить SQL-скрипт и логику в парсере.
- Добавить новый endpoint: реализовать в `backend/server.js`, описать контракт в README.
- Миграция БД: использовать скрипты из корня, обновить структуру через Supabase.

## Важно
- Не ломайте текущий функционал, не удаляйте лишнего.
- Все изменения должны быть объяснены и согласованы с пользователем.
- Следуйте русскоязычным комментариям и инструкциям.

---

_Для подробностей см. `README.md` в корне, а также инструкции в папках сервисов._
