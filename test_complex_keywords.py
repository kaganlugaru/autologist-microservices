# –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–æ–≤–æ–π —Ñ—É–Ω–∫—Ü–∏–∏ —Å–ª–æ–∂–Ω—ã—Ö –∫–ª—é—á–µ–≤—ã—Ö —Å–ª–æ–≤
# –≠—Ç–æ—Ç —Å–∫—Ä–∏–ø—Ç —Ç–µ—Å—Ç–∏—Ä—É–µ—Ç –ª–æ–≥–∏–∫—É –ø—Ä–æ–≤–µ—Ä–∫–∏ –∫–ª—é—á–µ–≤—ã—Ö —Å–ª–æ–≤ —Å –ª–æ–≥–∏—á–µ—Å–∫–∏–º–∏ –æ–ø–µ—Ä–∞—Ç–æ—Ä–∞–º–∏

def check_keywords(keywords_list, text):
    """
    –¢–µ—Å—Ç–æ–≤–∞—è —Ñ—É–Ω–∫—Ü–∏—è –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –ª–æ–≥–∏–∫–∏ –∫–ª—é—á–µ–≤—ã—Ö —Å–ª–æ–≤
    –ö–æ–ø–∏—Ä—É–µ—Ç –ª–æ–≥–∏–∫—É –∏–∑ telegram_parser.py
    """
    found_keywords = []
    text_lower = text.lower()
    
    for keyword in keywords_list:
        # –ü—Ä–æ–≤–µ—Ä—è–µ–º, —Å–æ–¥–µ—Ä–∂–∏—Ç –ª–∏ –∫–ª—é—á–µ–≤–æ–µ —Å–ª–æ–≤–æ –æ–ø–µ—Ä–∞—Ç–æ—Ä –ª–æ–≥–∏—á–µ—Å–∫–æ–≥–æ –ò (;)
        if ';' in keyword:
            # –†–∞–∑–±–∏–≤–∞–µ–º –∫–ª—é—á–µ–≤–æ–µ —Å–ª–æ–≤–æ –Ω–∞ —á–∞—Å—Ç–∏ –ø–æ —Å–∏–º–≤–æ–ª—É ;
            keyword_parts = [part.strip() for part in keyword.split(';')]
            
            # –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ –í–°–ï —á–∞—Å—Ç–∏ –ø—Ä–∏—Å—É—Ç—Å—Ç–≤—É—é—Ç –≤ —Ç–µ–∫—Å—Ç–µ
            all_parts_found = True
            for part in keyword_parts:
                if part and part not in text_lower:
                    all_parts_found = False
                    break
            
            # –ï—Å–ª–∏ –≤—Å–µ —á–∞—Å—Ç–∏ –Ω–∞–π–¥–µ–Ω—ã, –¥–æ–±–∞–≤–ª—è–µ–º –≤ —Ä–µ–∑—É–ª—å—Ç–∞—Ç
            if all_parts_found and len(keyword_parts) > 1:
                found_keywords.append(keyword)
        else:
            # –û–±—ã—á–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –¥–ª—è –ø—Ä–æ—Å—Ç—ã—Ö –∫–ª—é—á–µ–≤—ã—Ö —Å–ª–æ–≤
            if keyword in text_lower:
                found_keywords.append(keyword)
    
    return found_keywords

# –¢–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ
test_keywords = [
    "—Ç–∞–Ω–¥–µ–º",           # –ø—Ä–æ—Å—Ç–æ–µ –∫–ª—é—á–µ–≤–æ–µ —Å–ª–æ–≤–æ
    "140",              # –ø—Ä–æ—Å—Ç–æ–µ –∫–ª—é—á–µ–≤–æ–µ —Å–ª–æ–≤–æ  
    "—Ç–∞–Ω–¥–µ–º;140",       # —Å–ª–æ–∂–Ω–æ–µ: —Ç–∞–Ω–¥–µ–º –ò 140
    "–≥—Ä—É–∑;–¥–∞–ª—å–Ω–æ–±–æ–π",   # —Å–ª–æ–∂–Ω–æ–µ: –≥—Ä—É–∑ –ò –¥–∞–ª—å–Ω–æ–±–æ–π
    "–≥—Ä—É–∑;–¥–∞–ª—å–Ω–æ–±–æ–π;—Å—Ä–æ—á–Ω–æ"  # —Å–ª–æ–∂–Ω–æ–µ: –≥—Ä—É–∑ –ò –¥–∞–ª—å–Ω–æ–±–æ–π –ò —Å—Ä–æ—á–Ω–æ
]

test_messages = [
    "–ù—É–∂–µ–Ω —Ç–∞–Ω–¥–µ–º –Ω–∞ –¥–∞–ª—å–Ω–æ–±–æ–π",
    "–ò—â—É —Ç–∞–Ω–¥–µ–º 140 –∫—É–± –Ω–∞ –∑–∞–≤—Ç—Ä–∞",
    "–°—Ä–æ—á–Ω–æ –≥—Ä—É–∑ –¥–ª—è –¥–∞–ª—å–Ω–æ–±–æ—è, –Ω—É–∂–µ–Ω —Ç–∞–Ω–¥–µ–º",
    "–ì—Ä—É–∑ –¥–∞–ª—å–Ω–æ–±–æ–π —Å—Ä–æ—á–Ω–æ 140 –∫—É–±",
    "–ü—Ä–æ—Å—Ç–æ –æ–±—ã—á–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –±–µ–∑ –∫–ª—é—á–µ–≤—ã—Ö —Å–ª–æ–≤",
    "140 –∫—É–±–æ–≤ –≥—Ä—É–∑–∞",
    "–¢–∞–Ω–¥–µ–º –¥–ª—è –ø–µ—Ä–µ–≤–æ–∑–∫–∏"
]

print("üß™ –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–ï –°–õ–û–ñ–ù–´–• –ö–õ–Æ–ß–ï–í–´–• –°–õ–û–í\n")
print("–ù–∞—Å—Ç—Ä–æ–µ–Ω–Ω—ã–µ –∫–ª—é—á–µ–≤—ã–µ —Å–ª–æ–≤–∞:")
for i, keyword in enumerate(test_keywords, 1):
    keyword_type = "üîó –°–õ–û–ñ–ù–û–ï" if ";" in keyword else "üìù –ü–†–û–°–¢–û–ï"
    print(f"  {i}. {keyword_type}: '{keyword}'")

print("\n" + "="*80)
print("–†–ï–ó–£–õ–¨–¢–ê–¢–´ –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–Ø:")
print("="*80)

for i, message in enumerate(test_messages, 1):
    found = check_keywords(test_keywords, message)
    status = "‚úÖ –ù–ê–ô–î–ï–ù–´" if found else "‚ùå –ù–ï –ù–ê–ô–î–ï–ù–´"
    
    print(f"\n{i}. –°–æ–æ–±—â–µ–Ω–∏–µ: '{message}'")
    print(f"   {status}: {found if found else '–Ω–µ—Ç —Å–æ–≤–ø–∞–¥–µ–Ω–∏–π'}")

print("\n" + "="*80)
print("–ü–†–û–í–ï–†–ö–ê –ö–û–ù–ö–†–ï–¢–ù–´–• –°–õ–£–ß–ê–ï–í:")
print("="*80)

# –°–ø–µ—Ü–∏–∞–ª—å–Ω—ã–µ —Ç–µ—Å—Ç—ã
special_tests = [
    {
        'message': '–ù—É–∂–µ–Ω —Ç–∞–Ω–¥–µ–º 140 –∫—É–± –Ω–∞ –∑–∞–≤—Ç—Ä–∞',
        'expected': ['—Ç–∞–Ω–¥–µ–º', '140', '—Ç–∞–Ω–¥–µ–º;140'],
        'description': '–î–æ–ª–∂–Ω—ã –Ω–∞–π—Ç–∏—Å—å: –ø—Ä–æ—Å—Ç—ã–µ "—Ç–∞–Ω–¥–µ–º", "140" –∏ —Å–ª–æ–∂–Ω–æ–µ "—Ç–∞–Ω–¥–µ–º;140"'
    },
    {
        'message': '–ì—Ä—É–∑ –¥–∞–ª—å–Ω–æ–±–æ–π —Å—Ä–æ—á–Ω–æ —Ç—Ä–µ–±—É–µ—Ç—Å—è',
        'expected': ['–≥—Ä—É–∑;–¥–∞–ª—å–Ω–æ–±–æ–π', '–≥—Ä—É–∑;–¥–∞–ª—å–Ω–æ–±–æ–π;—Å—Ä–æ—á–Ω–æ'],
        'description': '–î–æ–ª–∂–Ω—ã –Ω–∞–π—Ç–∏—Å—å —Å–ª–æ–∂–Ω—ã–µ –∫–ª—é—á–µ–≤—ã–µ —Å–ª–æ–≤–∞ —Å –ª–æ–≥–∏—á–µ—Å–∫–∏–º –ò'
    },
    {
        'message': '–¢–æ–ª—å–∫–æ —Ç–∞–Ω–¥–µ–º –±–µ–∑ –Ω–æ–º–µ—Ä–∞',
        'expected': ['—Ç–∞–Ω–¥–µ–º'],
        'description': '–î–æ–ª–∂–Ω–æ –Ω–∞–π—Ç–∏—Å—å —Ç–æ–ª—å–∫–æ –ø—Ä–æ—Å—Ç–æ–µ "—Ç–∞–Ω–¥–µ–º", —Å–ª–æ–∂–Ω–æ–µ "—Ç–∞–Ω–¥–µ–º;140" –Ω–µ –Ω–∞–π–¥–µ—Ç—Å—è'
    }
]

for test in special_tests:
    found = check_keywords(test_keywords, test['message'])
    success = set(found) == set(test['expected'])
    status_icon = "‚úÖ" if success else "‚ùå"
    
    print(f"\n{status_icon} –¢–µ—Å—Ç: {test['description']}")
    print(f"   –°–æ–æ–±—â–µ–Ω–∏–µ: '{test['message']}'")
    print(f"   –û–∂–∏–¥–∞–ª–æ—Å—å: {test['expected']}")
    print(f"   –ü–æ–ª—É—á–µ–Ω–æ:  {found}")
    print(f"   –†–µ–∑—É–ª—å—Ç–∞—Ç: {'–ü–†–û–ô–î–ï–ù' if success else '–ü–†–û–í–ê–õ–ï–ù'}")

print(f"\n{'='*80}")
print("üéâ –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–ï –ó–ê–í–ï–†–®–ï–ù–û!")
print("–ï—Å–ª–∏ –≤—Å–µ —Ç–µ—Å—Ç—ã –ø—Ä–æ—à–ª–∏ —É—Å–ø–µ—à–Ω–æ, —Ñ—É–Ω–∫—Ü–∏—è —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ.")
print("="*80)