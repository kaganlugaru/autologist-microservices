#!/usr/bin/env python3
# -*- coding: utf-8 -*-

"""
–õ–æ–∫–∞–ª—å–Ω—ã–π —Ç–µ—Å—Ç –ª–æ–≥–∏–∫–∏ –∫–ª—é—á–µ–≤—ã—Ö —Å–ª–æ–≤ –±–µ–∑ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö
"""

def check_keywords_in_message(keywords, message_text):
    """–õ–æ–≥–∏–∫–∞ –∏–∑ telegram_parser.py"""
    if not keywords:
        return False
    
    keywords_str = str(keywords).lower()
    message_lower = message_text.lower()
    
    print(f"–ü—Ä–æ–≤–µ—Ä—è—é –∫–ª—é—á–µ–≤—ã–µ —Å–ª–æ–≤–∞: '{keywords_str}' –≤ —Å–æ–æ–±—â–µ–Ω–∏–∏: '{message_text}'")
    
    # –ï—Å–ª–∏ –µ—Å—Ç—å –æ–ø–µ—Ä–∞—Ç–æ—Ä ;, —ç—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç –ª–æ–≥–∏—á–µ—Å–∫–æ–µ –ò (–≤—Å–µ –∫–ª—é—á–µ–≤—ã–µ —Å–ª–æ–≤–∞ –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –≤ —Å–æ–æ–±—â–µ–Ω–∏–∏)
    if ';' in keywords_str:
        keyword_list = [kw.strip() for kw in keywords_str.split(';')]
        print(f"  –û–±–Ω–∞—Ä—É–∂–µ–Ω —Å–æ—Å—Ç–∞–≤–Ω–æ–π –∫–ª—é—á: {keyword_list}")
        
        # –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ –≤—Å–µ –∫–ª—é—á–µ–≤—ã–µ —Å–ª–æ–≤–∞ –ø—Ä–∏—Å—É—Ç—Å—Ç–≤—É—é—Ç –≤ —Å–æ–æ–±—â–µ–Ω–∏–∏
        for keyword in keyword_list:
            if keyword and keyword not in message_lower:
                print(f"  ‚ùå –ö–ª—é—á–µ–≤–æ–µ —Å–ª–æ–≤–æ '{keyword}' –ù–ï –Ω–∞–π–¥–µ–Ω–æ –≤ —Å–æ–æ–±—â–µ–Ω–∏–∏")
                return False
            else:
                print(f"  ‚úÖ –ö–ª—é—á–µ–≤–æ–µ —Å–ª–æ–≤–æ '{keyword}' –Ω–∞–π–¥–µ–Ω–æ")
        
        print(f"  ‚úÖ –í—Å–µ –∫–ª—é—á–µ–≤—ã–µ —Å–ª–æ–≤–∞ –Ω–∞–π–¥–µ–Ω—ã –≤ —Å–æ–æ–±—â–µ–Ω–∏–∏!")
        return True
    else:
        # –û–±—ã—á–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –æ–¥–Ω–æ–≥–æ –∫–ª—é—á–µ–≤–æ–≥–æ —Å–ª–æ–≤–∞
        result = keywords_str in message_lower
        status = "‚úÖ –Ω–∞–π–¥–µ–Ω–æ" if result else "‚ùå –Ω–µ –Ω–∞–π–¥–µ–Ω–æ"
        print(f"  –ü—Ä–æ—Å—Ç–æ–µ –∫–ª—é—á–µ–≤–æ–µ —Å–ª–æ–≤–æ '{keywords_str}': {status}")
        return result

def main():
    print("=== –¢–ï–°–¢ –õ–û–ì–ò–ö–ò –ö–õ–Æ–ß–ï–í–´–• –°–õ–û–í ===\n")
    
    # –¢–µ—Å—Ç–æ–≤—ã–µ —Å–ª—É—á–∞–∏
    test_cases = [
        {
            "keywords": "—Ç–∞–Ω–¥–µ–º;140",
            "message": "–ü—Ä–æ–¥–∞—é —Ç–∞–Ω–¥–µ–º –≤–µ–ª–æ—Å–∏–ø–µ–¥ –∑–∞ 140 –¥–æ–ª–ª–∞—Ä–æ–≤",
            "expected": True,
            "description": "–°–æ—Å—Ç–∞–≤–Ω–æ–π –∫–ª—é—á: –æ–±–∞ —Å–ª–æ–≤–∞ –µ—Å—Ç—å"
        },
        {
            "keywords": "—Ç–∞–Ω–¥–µ–º;140",
            "message": "–ü—Ä–æ–¥–∞—é —Ç–∞–Ω–¥–µ–º –≤–µ–ª–æ—Å–∏–ø–µ–¥ –∑–∞ 150 –¥–æ–ª–ª–∞—Ä–æ–≤",
            "expected": False,
            "description": "–°–æ—Å—Ç–∞–≤–Ω–æ–π –∫–ª—é—á: –µ—Å—Ç—å —Ç–∞–Ω–¥–µ–º, –Ω–æ –Ω–µ—Ç 140"
        },
        {
            "keywords": "—Ç–∞–Ω–¥–µ–º;140",
            "message": "–¶–µ–Ω–∞ 140 —Ä—É–±–ª–µ–π –∑–∞ —á—Ç–æ-—Ç–æ",
            "expected": False,
            "description": "–°–æ—Å—Ç–∞–≤–Ω–æ–π –∫–ª—é—á: –µ—Å—Ç—å 140, –Ω–æ –Ω–µ—Ç —Ç–∞–Ω–¥–µ–º"
        },
        {
            "keywords": "–≤–µ–ª–æ—Å–∏–ø–µ–¥",
            "message": "–ü—Ä–æ–¥–∞—é –≤–µ–ª–æ—Å–∏–ø–µ–¥ –≥–æ—Ä–Ω—ã–π",
            "expected": True,
            "description": "–ü—Ä–æ—Å—Ç–æ–π –∫–ª—é—á: –Ω–∞–π–¥–µ–Ω"
        },
        {
            "keywords": "–º–∞—à–∏–Ω–∞",
            "message": "–ü—Ä–æ–¥–∞—é –≤–µ–ª–æ—Å–∏–ø–µ–¥",
            "expected": False,
            "description": "–ü—Ä–æ—Å—Ç–æ–π –∫–ª—é—á: –Ω–µ –Ω–∞–π–¥–µ–Ω"
        },
        {
            "keywords": "–≥—Ä—É–∑",
            "message": "–ù—É–∂–µ–Ω –≥—Ä—É–∑–æ–≤–∏–∫ –¥–ª—è –ø–µ—Ä–µ–≤–æ–∑–∫–∏ –≥—Ä—É–∑–∞",
            "expected": True,
            "description": "–ü—Ä–æ—Å—Ç–æ–π –∫–ª—é—á: –Ω–∞–π–¥–µ–Ω –≤ —Ç–µ–∫—Å—Ç–µ"
        },
        {
            "keywords": "–≥—Ä—É–∑;–ø–µ—Ä–µ–≤–æ–∑–∫–∏",
            "message": "–ü—Ä–µ–¥–ª–∞–≥–∞—é —É—Å–ª—É–≥–∏ –≥—Ä—É–∑–æ–ø–µ—Ä–µ–≤–æ–∑–∫–∏ –ø–æ –≥–æ—Ä–æ–¥—É",
            "expected": False,
            "description": "–°–æ—Å—Ç–∞–≤–Ω–æ–π –∫–ª—é—á: –µ—Å—Ç—å '–≥—Ä—É–∑' –≤–Ω—É—Ç—Ä–∏ '–≥—Ä—É–∑–æ–ø–µ—Ä–µ–≤–æ–∑–∫–∏', –Ω–æ –Ω–µ—Ç –æ—Ç–¥–µ–ª—å–Ω–æ–≥–æ —Å–ª–æ–≤–∞ '–ø–µ—Ä–µ–≤–æ–∑–∫–∏'"
        },
        {
            "keywords": "–≥—Ä—É–∑;–ø–µ—Ä–µ–≤–æ–∑–∫–∏",
            "message": "–ù—É–∂–µ–Ω –≥—Ä—É–∑ –∏ —É—Å–ª—É–≥–∏ –ø–µ—Ä–µ–≤–æ–∑–∫–∏",
            "expected": True,
            "description": "–°–æ—Å—Ç–∞–≤–Ω–æ–π –∫–ª—é—á: –æ–±–∞ —Å–ª–æ–≤–∞ –µ—Å—Ç—å –æ—Ç–¥–µ–ª—å–Ω–æ"
        }
    ]
    
    total_tests = len(test_cases)
    passed_tests = 0
    
    for i, test in enumerate(test_cases, 1):
        print(f"–¢–µ—Å—Ç {i}/{total_tests}: {test['description']}")
        
        result = check_keywords_in_message(test['keywords'], test['message'])
        
        if result == test['expected']:
            print(f"  üéØ –†–ï–ó–£–õ–¨–¢–ê–¢: –¢–ï–°–¢ –ü–†–û–®–ï–õ")
            passed_tests += 1
        else:
            print(f"  üí• –†–ï–ó–£–õ–¨–¢–ê–¢: –¢–ï–°–¢ –ü–†–û–í–ê–õ–ï–ù (–æ–∂–∏–¥–∞–ª—Å—è {test['expected']}, –ø–æ–ª—É—á–µ–Ω {result})")
        
        print()
    
    print("=" * 50)
    print(f"–ò–¢–û–ì–ò –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–Ø:")
    print(f"  –í—Å–µ–≥–æ —Ç–µ—Å—Ç–æ–≤: {total_tests}")
    print(f"  –ü—Ä–æ—à–ª–æ: {passed_tests}")
    print(f"  –ü—Ä–æ–≤–∞–ª–µ–Ω–æ: {total_tests - passed_tests}")
    
    if passed_tests == total_tests:
        print(f"  ‚úÖ –í–°–ï –¢–ï–°–¢–´ –ü–†–û–®–õ–ò –£–°–ü–ï–®–ù–û!")
    else:
        print(f"  ‚ùå –ï–°–¢–¨ –ü–†–û–í–ê–õ–ï–ù–ù–´–ï –¢–ï–°–¢–´!")
    
    print("=" * 50)

if __name__ == "__main__":
    main()